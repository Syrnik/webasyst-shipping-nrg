# Набор разных вспомогательных методов для плагинов расчёта доставки (в основном) Webasyst Framework

## Методы

### `replaceYo(string $str) : string`

Заменяет ё на е

### `mb_trim(string $str) : string`

Убирает пробельные символы с начала и конца строки. Почти то же самое, что `trim()` только с учётом UTF-8

### Дней до отправки

````php
calcDaysToShip(
    int $limit_hour=0,
    int $add_days=0,
    array $weekdays = [1,2,3,4,5,6,7],
    array $params = []
) : int
````

Расчет дней до отправки исходя из часа переноса отгрузки, дней на комплектацию
и дней недели, когда производится передача отправления в курьерскую службу

1. Учесть перенос часа
2. Учесть комлектацию
3. Учесть день недели

#### Параметры:

 - `int $limit_hour` час переноса отгрузки. 0-23. Час суток, начиная с которого комплектование заказа
 переносится на завтра
 - `int $add_days` добавить дней на комлектацию
 - `array $weekdays` массив дней недели, когда передаются заказы
 - `array $params` Дополнительные параметры
 - `$params['workdays']` sting[] массив строк с датами в формате `d.m.Y` (не спрашивайте почему)
 представляющие собой «дополнительные рабочие дни», т.е. день в любом слкчае рабочий, даже если
 он в `$weekdays` не попадает
 - `$params['weekends']` - string[], дополнительные выходные дние, d.m.Y
 - `$params['start_day']` - string|DateTimeInterface начальный день (если не указано - сегодня)

#### Возвращает

`int` - количество дней до отправки

### Запрет на город/регион

На самом деле просто проверяет, попадают-ли город и регион в условия.

````php
public static function isBannedLocation($city_name, $region_code, $excluded)
````

#### Параметры

- `string $city` название города
- `string $region` **код** региона
- `string $excluded` строка с условиями

#### Пример

`москва,одинцово:50,:47`
     
- город в любом регионе называющийся "москва"
- город в 50 регионе, называющийся "одинцово"
- любой город в 47 регионе

#### Возвращает

`bool` Попадает город/регион в заданное условие или нет

### `monetaryString(float $value) : string`

Форматирует число в строку в "денежном" формате '0.00'
 
